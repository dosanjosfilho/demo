<div class="main-menu">
    <ul>
        {{ $currentPage := . }}
        {{ range .Site.Menus.main }}
    
        <!--{{ printf "%#v" ($currentPage.IsMenuCurrent "main" .) }}-->
        <!--{{ printf "%#v" ($currentPage.HasMenuCurrent "main" .) }}-->
    
        {{ if .HasChildren }}
            <li class="menu-item-{{ .Name | lower }}{{if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active{{ end }}">
            <a href="{{ .URL }}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
            </a>
            <ul class="sub-menu">
                {{ range .Children }}
                <li class="{{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
                    <a href="{{ .URL }}">{{ .Name }}</a>
                {{ end }}
            </ul>
        {{else}}
            <li class="menu-item-{{ .Name | lower }}{{ if $currentPage.IsMenuCurrent "main" . }} active{{ end }}">
            <a href="{{.URL}}">
                {{ .Pre }}
                <span>{{ .Name }}</span>
            </a>
        {{end}}
        {{end}}
        <li>    
          <div class="logos">
            <div class="logo">
              <a href="{{ .Site.Params.repo.url }}" target="_blank"><img width="32px" alt="{{ .Site.Title }} Logo" src="{{ .Site.BaseURL }}images/gh-logo.svg" /></a>
            </div>
            <div class="logo-invert">
              <a href="{{ .Site.Params.repo.url }}" target="_blank"><img width="32px" alt="{{ .Site.Title }} Logo" src="{{ .Site.BaseURL }}images/gh-logo-invert.svg" /></a>
            </div>
          </div>
        </li>
    </ul>
  </div>